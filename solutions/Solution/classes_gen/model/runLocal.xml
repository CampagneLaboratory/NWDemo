<project name="nextflow-local" default="submit">
  <dirname property="nextflow-local.basedir" file="${ant.file.nextflow-local}" />
  <property name="working.dir" location="${nextflow-local.basedir}" />
  <property name="workflow.script" location="" />
  <property name="workflow.commandline" location="" />
  <property name="nextflow.home" location="" />
  <property name="nxf.classpath" value="" />
  
  <echo message="workflow.commandline=${workflow.commandline}"></echo>
  <echo message="nextflowOptions=${nextflowOptions}"></echo>
  <property environment="env"></property>
  <target name="submit">
    <exec executable="${nextflow.home}/nextflow" dir="${working.dir}">
      <env key="NXF_CLASSPATH" path="${nxf.classpath}" />
      <env key="PATH" value="${env.PATH}:/usr/local/" />
      <arg value="run" />
      <arg value="-with-docker" />
      <arg value="-lib" />
      <arg value="${nxf.classpath}" />
      <arg line="${nextflowOptions}" />
      <arg value="${workflow.script}" />
      <arg value="${workflow.commandline}" />
    </exec>
  </target>
  
</project>